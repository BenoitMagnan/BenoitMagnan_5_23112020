<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <!--LIEN VERS LA POLICE DE CHARACTERES RALEWAY-->
  <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <!---->

  <!--LIEN DE CONNEXION VERS FONTAWESOME-->
  <link rel="preconnect" href="https://fonts.gstatic.com"> 
  <script src="https://kit.fontawesome.com/637b694283.js" crossorigin="anonymous"></script>
  <!---->


  <link rel="stylesheet" href="css/style.css" />
  
  <title>Orinoco - Vente en ligne</title>
</head>

<body>
  <div class="bg-primary">
    <div class="container">
      <div class="row">
        <nav class="col navbar navbar-light">
          <a class="navbar-brand" href="index.html"><img class="mr-4" src="logo.png"  alt="Logo d'Orinoco - Retour à la page d'acceuil" /></a>
            <ul class="navbar-nav">
              <li class="nav-item ">
                <a class="nav-link" href="pages/panier.html"><i class="fas fa-shopping-basket"></i></a>
              </li>
            </ul>
        </nav>
      </div>
    </div>
  </div>

  <div class="container px-4">
    <div class="row my-4 bg-primary rounded text-center">
      <div id="navButton" class="col-12">
        <div id="mainTitle">
          <h1 class="my-4">Bienvenue sur Oricono</h1>
          <p>Choississez le catalogue que vous souhaitez afficher :</p>
        </div>
          <ul class="navbar-nav my-4 flex-row mt-4">
            <li class="nav-item col-4">
              <button id="teddies"><i class="icon-menu fas fa-paw"></i> <!--onclick="fetchTeddies())"-->
                <div class="d-none d-lg-inline">
                  <h3 class="mt-2">Ours en peluche</h3>
                  <p><sub><em>On vous supplie d'adopter Garfunkel...</em></sub></p>
                </div>
              </button>
            </li>
            <li class="nav-item col-4">
              <button id="cameras"><i class="icon-menu fas fa-camera-retro"></i> <!--onclick="fetchCameras()"-->
                <div class="d-none d-lg-inline">
                  <h3 class="mt-2">Appareils photo</h3>
                  <p><sub><em>Des comme on en fait plus</em></sub></p>
                </div>
              </button>
            </li>
            <li class="nav-item col-4">
              <button id="furniture"><i class="icon-menu fas fa-chair"></i> <!--onclick="fetchFurniture()"-->
                <div class="d-none d-lg-inline">
                  <h3 class="mt-2">Meubles</h3>
                  <p><sub><em>A l'ancienne !</em></sub></p>
                </div>
              </button>
            </li>
          </ul>
      </div>
    </div>

    <div id="cardHolder" class="row justify-content-center my-4">
    </div>

  </div>
  

  <script>
  const cardHolder = document.getElementById('cardHolder');
  const mainTitle = document.getElementById('mainTitle');

  const navButton = document.getElementById('navButton');
  const teddies = document.getElementById('teddies');
  const cameras = document.getElementById('cameras');
  const furniture = document.getElementById('furniture');
  
  const request = new XMLHttpRequest();

  teddies.addEventListener('click', fetchTeddies);
  cameras.addEventListener('click', fetchCameras);
  furniture.addEventListener('click', fetchFurniture);

  function fetchTeddies(){
    mainTitle.innerHTML = "";
    cardHolder.innerHTML = "";
    request.onreadystatechange = function(){
        if(this.readyState == XMLHttpRequest.DONE && this.status == 200){
          const response =  JSON.parse(this.responseText);

          for (i = 0; i < response.length; i++) {
            cardHolder.innerHTML +=
            "<div class='col-12 col-lg-6 p-2 text-justify'>"
              + "<div class='card h-100 shadow'>"
                + "<div class='card-body'>"
                  + "<h2>" + response[i].name + "</h2>"
                  + "<div class='img-container'>"
                    + "<a class='stretched-link' href='pages/produit.html?page=teddies&index=" + i + "'><img class='col-12 mx-auto d-block' src='" + response[i].imageUrl + "' alt='" + response[i].description + "'></a>"
                  + "</div>"
                  // + "<p class='p-2'>" + response[i].description + "</p>"
                  // + "<p class='p-4 text-right font-weight-bold font-italic'>" + response[i].price / 100 + " €</p>"
                  + "</div>"
                + "</div>"
              + "</div>"
            + "</div>";
          }
        }
      }
    request.open('GET', 'http://localhost:3000/api/teddies');    //http://localhost:3000/api/teddies'    https://jwdp5.herokuapp.com/api/teddies  
    request.send();
  }

  function fetchCameras(){
    mainTitle.innerHTML = "";
    cardHolder.innerHTML = "";
    request.onreadystatechange = function(){
        if(this.readyState == XMLHttpRequest.DONE && this.status == 200){
          const response =  JSON.parse(this.responseText);

          for (i = 0; i < response.length; i++) {
       
            cardHolder.innerHTML +=
            "<div class='col-12 col-lg-6 p-2 text-justify'>"
              + "<div class='card h-100 shadow'>"
                + "<div class='card-body'>"
                  + "<h2>" + response[i].name + "</h2>"
                  + "<div class='img-container'>"
                    + "<a class='stretched-link' href='pages/produit.html?page=cameras&index=" + i + "'><img class='col-12 mx-auto d-block' src='" + response[i].imageUrl + "' alt='" + response[i].description + "'></a>"
                  + "</div>"
                  // + "<p class='p-4 mt-4'>" + response[i].description + "</p>"
                  // + "<p class='p-4 text-right font-weight-bold font-italic'>" + response[i].price / 100 + " €</p>"
                  + "</div>"
                + "</div>"
              + "</div>"
            + "</div>";
          }
        }
      }
    request.open('GET', 'http://localhost:3000/api/cameras');    //http://localhost:3000/api/cameras'    https://jwdp5.herokuapp.com/api/cameras  
    request.send();
  }

  function fetchFurniture(){
    mainTitle.innerHTML = "";
    cardHolder.innerHTML = "";
    request.onreadystatechange = function(){
        if(this.readyState == XMLHttpRequest.DONE && this.status == 200){
          const response =  JSON.parse(this.responseText);

          for (i = 0; i < response.length; i++) {
       
            cardHolder.innerHTML +=
            "<div class='col-12 col-lg-6 p-2 text-justify'>"
              + "<div class='card h-100 shadow'>"
                + "<div class='card-body'>"
                  + "<h2>" + response[i].name + "</h2>"
                  + "<div class='img-container'>"
                    + "<a class='stretched-link' href='pages/produit.html?page=furniture&index=" + i + "'><img class='col-12 mx-auto d-block' src='" + response[i].imageUrl + "' alt='" + response[i].description + "'></a>"
                  + "</div>"
                  // + "<p class='p-4 mt-4'>" + response[i].description + "</p>"
                  // + "<p class='p-4 text-right font-weight-bold font-italic'>" + response[i].price / 100 + " €</p>"
                  + "</div>"
                + "</div>"
              + "</div>"
            + "</div>";
          }
        }
      }
    request.open('GET', 'http://localhost:3000/api/furniture');    //http://localhost:3000/api/furniture'    https://jwdp5.herokuapp.com/api/furniture  
    request.send();
  }

  </script>

</body>
</html>

    